{"version":3,"file":"bundle.umd.js","sources":["../../../../sdk/pref.js","../../../../sdk/index.js"],"sourcesContent":["export default {\n  init: (cb) => {\n    cb()\n    let performance = window.performance\n    let isDomReady = false\n    let isLoaded = false\n    let Util = {\n      getPerfData(p) {\n        let data = {\n          // 网络连接相关时间\n          prevPage: p.fetchStart - p.navigationStart, // 上一个页面的时间\n          redirect: p.redirectEnd - p.redirectStart, // 重定向时间\n          dns: p.domainLookupEnd - p.domainLookupStart, //DNS查询时间\n          tcp: p.connectEnd - p.connectStart, // tcp连接时间\n          network: p.connectEnd - p.navigationStart, // 网络总耗时\n          // 网络接收时间\n          send: p.responseStart - p.requestStart, // 数据从发送到接收的时间\n          receive: p.responseEnd - p.responseStart, // 接收数据时间\n          request: p.responseEnd - p.requestStart, // 请求页面总耗时\n          // 前端渲染总耗时\n          dom: p.domComplete - p.domLoading, //dom解析时间\n          loadEvent: p.loadEventEnd - p.loadEventStart, // load事件执行时间\n          frontend: p.loadEventEnd - p.domLoading, // 前端渲染总时间\n          //\n          load: p.loadEventEnd - p.navigationStart, // 页面完全加载的时间\n          domReady: p.domContentLoadedEventStart - p.navigationStart, // DOM准备时间\n          interactive: p.domInteractive - p.navigationStart, // DOM可交互时间\n          ttfb: p.responseStart - p.navigationStart, // 首字节时间\n        }\n        return data\n      },\n      domReady(callback) {\n        if(isDomReady) return\n        let timer = null\n        let runCheck = () => {\n          if(performance.timing.domComplete) {\n            clearTimeout(timer)\n            callback()\n            isDomReady = true\n          } else {\n            timer = setTimeout(runCheck, 100)\n          }\n        }\n\n        window.addEventListener('DOMContentLoaded', () => {\n          runCheck()\n        })\n      },\n      load(callback) {\n      }\n    }\n    Util.domReady(() => {\n      let prefData = Util.getPerfData(performance.timing)\n      debugger\n    })\n    // window.addEventListener('DOMContentLoaded', () => {\n    //   setTimeout(() => {\n    //     let perfData = Util.getPerfData(performance.timing)\n    //     debugger\n    //   }, 100)\n    // })\n    //\n    // window.addEventListener('load', () => {\n    //   setTimeout(() => {\n    //     let perfData = Util.getPerfData(performance.timing)\n    //     debugger\n    //   }, 200)\n    // })\n  }\n}","import pref from './pref'\npref.init(() => {\n  console.log('pref init')\n})"],"names":[],"mappings":";;;;;AAAA,aAAe;EACf,EAAE,IAAI,EAAE,CAAC,EAAE,KAAK;EAChB,IAAI,EAAE,GAAE;EACR,IAAI,IAAI,WAAW,GAAG,MAAM,CAAC,YAAW;EACxC,IAAI,IAAI,UAAU,GAAG,MAAK;EAE1B,IAAI,IAAI,IAAI,GAAG;EACf,MAAM,WAAW,CAAC,CAAC,EAAE;EACrB,QAAQ,IAAI,IAAI,GAAG;EACnB;EACA,UAAU,QAAQ,EAAE,CAAC,CAAC,UAAU,GAAG,CAAC,CAAC,eAAe;EACpD,UAAU,QAAQ,EAAE,CAAC,CAAC,WAAW,GAAG,CAAC,CAAC,aAAa;EACnD,UAAU,GAAG,EAAE,CAAC,CAAC,eAAe,GAAG,CAAC,CAAC,iBAAiB;EACtD,UAAU,GAAG,EAAE,CAAC,CAAC,UAAU,GAAG,CAAC,CAAC,YAAY;EAC5C,UAAU,OAAO,EAAE,CAAC,CAAC,UAAU,GAAG,CAAC,CAAC,eAAe;EACnD;EACA,UAAU,IAAI,EAAE,CAAC,CAAC,aAAa,GAAG,CAAC,CAAC,YAAY;EAChD,UAAU,OAAO,EAAE,CAAC,CAAC,WAAW,GAAG,CAAC,CAAC,aAAa;EAClD,UAAU,OAAO,EAAE,CAAC,CAAC,WAAW,GAAG,CAAC,CAAC,YAAY;EACjD;EACA,UAAU,GAAG,EAAE,CAAC,CAAC,WAAW,GAAG,CAAC,CAAC,UAAU;EAC3C,UAAU,SAAS,EAAE,CAAC,CAAC,YAAY,GAAG,CAAC,CAAC,cAAc;EACtD,UAAU,QAAQ,EAAE,CAAC,CAAC,YAAY,GAAG,CAAC,CAAC,UAAU;EACjD;EACA,UAAU,IAAI,EAAE,CAAC,CAAC,YAAY,GAAG,CAAC,CAAC,eAAe;EAClD,UAAU,QAAQ,EAAE,CAAC,CAAC,0BAA0B,GAAG,CAAC,CAAC,eAAe;EACpE,UAAU,WAAW,EAAE,CAAC,CAAC,cAAc,GAAG,CAAC,CAAC,eAAe;EAC3D,UAAU,IAAI,EAAE,CAAC,CAAC,aAAa,GAAG,CAAC,CAAC,eAAe;EACnD,UAAS;EACT,QAAQ,OAAO,IAAI;EACnB,OAAO;EACP,MAAM,QAAQ,CAAC,QAAQ,EAAE;EACzB,QAAQ,GAAG,UAAU,EAAE,MAAM;EAC7B,QAAQ,IAAI,KAAK,GAAG,KAAI;EACxB,QAAQ,IAAI,QAAQ,GAAG,MAAM;EAC7B,UAAU,GAAG,WAAW,CAAC,MAAM,CAAC,WAAW,EAAE;EAC7C,YAAY,YAAY,CAAC,KAAK,EAAC;EAC/B,YAAY,QAAQ,GAAE;EACtB,YAAY,UAAU,GAAG,KAAI;EAC7B,WAAW,MAAM;EACjB,YAAY,KAAK,GAAG,UAAU,CAAC,QAAQ,EAAE,GAAG,EAAC;EAC7C,WAAW;EACX,UAAS;AACT;EACA,QAAQ,MAAM,CAAC,gBAAgB,CAAC,kBAAkB,EAAE,MAAM;EAC1D,UAAU,QAAQ,GAAE;EACpB,SAAS,EAAC;EACV,OAAO;EACP,MAAM,IAAI,CAAC,QAAQ,EAAE;EACrB,OAAO;EACP,MAAK;EACL,IAAI,IAAI,CAAC,QAAQ,CAAC,MAAM;EACxB,MAAM,IAAI,QAAQ,GAAG,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,MAAM,EAAC;EACzD,MAAM,QAAQ;EACd,KAAK,EAAC;EACN;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA,GAAG;EACH;;ECpEA,IAAI,CAAC,IAAI,CAAC,MAAM;EAChB,EAAE,OAAO,CAAC,GAAG,CAAC,WAAW,EAAC;EAC1B,CAAC;;;;"}